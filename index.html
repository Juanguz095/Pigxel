<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GranjaChanchito</title>
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/header.css">
</head>

<body>
<header class="barra-superior">
  <nav class="menu-izquierda">
    <a id="header-puntos">PUNTOS: 0</a>
    <a>APRENDER</a>
    <a style="text-align: center;">LOGROS</a>
  </nav>
  <div class="menu-logo">ğŸ· Pigxel Studio</div>
  <nav class="menu-derecha">
    <div class="selector activo">SOBRE NOSOTROS</div>
    <button class="btn-sesion" id="btn-usuario">INICIAR SESIÃ“N</button>
  </nav>
</header>

<!-- MODAL LOGIN / REGISTRO -->
<div id="modal-login" class="modal-login">
  <div class="login-box">

    <div class="cerrar" id="cerrar-login">âœ–</div>

    <h2 id="titulo-login">Iniciar SesiÃ³n</h2>

    <!-- LOGIN -->
    <div id="form-login">
      <input type="text" id="login-user" placeholder="Usuario">
      <input type="password" id="login-pass" placeholder="ContraseÃ±a">

      <button class="btn-login" id="btn-login">Entrar</button>

      <p class="cambio" id="ir-registro">
        Â¿No tienes cuenta? RegÃ­strate
      </p>
    </div>

    <!-- REGISTRO -->
    <div id="form-registro" style="display:none;">
      <input type="text" id="reg-user" placeholder="Nuevo usuario">
      <input type="password" id="reg-pass" placeholder="Nueva contraseÃ±a">

      <button class="btn-login" id="btn-registrar">Crear Cuenta</button>

      <p class="cambio" id="ir-login">
        Â¿Ya tienes cuenta? Inicia SesiÃ³n
      </p>
    </div>

  </div>
</div>

<section class="hero">
  <h1>RETOS DE LA GRANJA</h1>
  <p>24 desafÃ­os antes de la cosecha ğŸ·ğŸŒ¾</p>
  <button class="boton-iniciar">INGRESAR</button>

  <div class="iconos">
    <img src="https://i.imgur.com/kR1qz7K.png" alt="JS">
    <img src="https://i.imgur.com/4u4Cq8y.png" alt="TS">
    <img src="https://i.imgur.com/Yz3O7PG.png" alt="PY">
  </div>
</section>

<section class="cuadricula" id="cuadricula-retos"></section>

<script>
const retos = Array.from({ length: 24 }, (_, i) => {
  const niveles = ["FACIL", "MEDIO", "DIFICIL"];
  return { id: i + 1, nivel: niveles[i % 3] };
});

document.getElementById("cuadricula-retos").innerHTML =
  retos.map(r => `
    <a href="retos/reto${r.id}.html" class="tarjeta">
      <span class="etiqueta ${r.nivel.toLowerCase()}">${r.nivel}</span>
      <div class="imagen"></div>
      <span class="numero">${r.id}</span>
    </a>
  `).join("");


// ============================
// SISTEMA LOGIN / REGISTRO
// ============================
document.addEventListener("DOMContentLoaded", () => {

  const modal = document.getElementById("modal-login");
  const btnSesion = document.getElementById("btn-usuario");
  const btnCerrar = document.getElementById("cerrar-login");

  const formLogin = document.getElementById("form-login");
  const formRegistro = document.getElementById("form-registro");

  const btnLogin = document.getElementById("btn-login");
  const btnRegistrar = document.getElementById("btn-registrar");

  const irRegistro = document.getElementById("ir-registro");
  const irLogin = document.getElementById("ir-login");

  const puntosUI = document.querySelector(".menu-izquierda a");

  // ---- Cargar sesiÃ³n ----
  function cargarSesion() {
    const usuario = localStorage.getItem("usuario");
    const puntos = localStorage.getItem("puntos") || 0;

    puntosUI.textContent = `PUNTOS: ${puntos}`;
    btnSesion.textContent = usuario ? usuario + " ğŸ·" : "INICIAR SESIÃ“N";
  }

  cargarSesion();


  // ---- Abrir modal ----
  btnSesion.addEventListener("click", () => {
    modal.style.display = "flex";
  });

  // ---- Cerrar modal ----
  btnCerrar.addEventListener("click", () => {
    modal.style.display = "none";
  });

  // ---- Cambiar a registro ----
  irRegistro.addEventListener("click", () => {
    formLogin.style.display = "none";
    formRegistro.style.display = "block";
    document.getElementById("titulo-login").textContent = "Registrarse";
  });


  // ---- Volver login ----
  irLogin.addEventListener("click", () => {
    formLogin.style.display = "block";
    formRegistro.style.display = "none";
    document.getElementById("titulo-login").textContent = "Iniciar SesiÃ³n";
  });

  // ---- Registrar ----
  btnRegistrar.addEventListener("click", () => {
    const u = document.getElementById("reg-user").value.trim();
    const p = document.getElementById("reg-pass").value.trim();

    if (!u || !p) return alert("Completa todos los campos");

    localStorage.setItem("usuario", u);
    localStorage.setItem("password", p);
    localStorage.setItem("puntos", 0);

    alert("Cuenta creada ğŸ‰");
    irLogin.click(); // volver a login
  });

  // ---- Iniciar sesiÃ³n ----
  btnLogin.addEventListener("click", () => {
    const u = document.getElementById("login-user").value.trim();
    const p = document.getElementById("login-pass").value.trim();

    if (u === localStorage.getItem("usuario") &&
        p === localStorage.getItem("password")) {

      alert("SesiÃ³n iniciada ğŸ·âœ¨");
      localStorage.setItem("usuarioLogueado", "true");
      modal.style.display = "none";
      cargarSesion();

    } else {
      alert("Usuario o contraseÃ±a incorrectos");
    }
  });

});

</script>

<script src="js/retosJS/puntos.js"></script>
</body>
</html>
